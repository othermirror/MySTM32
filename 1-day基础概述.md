# 嵌入式系统

### 概念

> 以应用为中心，以现代计算机技术为基础，能够根据用户的需求（功能、可靠性、成本、体积、功耗），灵活的裁剪软硬件的专用计算机系统

- 以应用为中心：一般是针对专门的应用场景做了专门的性能、成本、功耗等优化
- 灵活的裁剪软硬件：嵌入式系统针对的应用场景非常多，带来的差异极大，所以需要根据用户特定的指标以及要求取设定硬件以及软件的功能需求实现

- [ ] 嵌入式系统就是为了某个专门的应用场景而设计的专门的计算机系统

### 嵌入式系统的组成

##### 1.硬件

> 硬件分为两个部分：==芯片== ==外围电路== 
>
> - 芯片 ： CPU + 总线 + 控制电路
> - 外围系统 ：服务于芯片工作的外部电路

- 最小系统的组成
- - 芯片 ： 运行程序
  - 复位电路 ： 目的是让芯片重新开始工作
  - 供电系统 ： 提供元器件所需的电源
  - 晶振系统 ： 提供时钟，是设备的==心脏==，没有时钟设备是无法工作的，所以几乎都要配置时钟

##### 2.软件(运行在硬件上)

> - BootLoader (引导程序)
>
>   引导加载程序。引导加载程序是系统上电后运行的第一段代码，用于引导OS运行
>
>   初始化必要的硬件
>
> - OS （操作系统）

##### 3.计算机主要的流派

> - 冯诺依曼体系结构
>
>   最开始的计算机仅有固定的用途，把计算机系统分为了五个部分
>
>   - ==算数逻辑单元（运算器）==：完成数据加工处理
>   - ==控制电路== ： 控制程序执行
>   - ==存储器== ： 记忆程序和数据
>     - CPU = 运算器 + 控制器 + 存储器
>   - ==输入设备== ： 输入数据和指令
>   - ==输出设备== ： 输出结果
>   
> - 哈佛体系结构
>
>   是一种将程序存储和数据存储分开的存储器结构，并没有完全突破冯诺依曼，只要是分成两个部分单独访问的结构都可以叫做哈佛结构
>
> - 计算机组成 = 运算器 + 控制器 + 存储器 + 输入/输出单元

##### 4.总线

> 计算机系统内部各组件之间是通过“总线”来通信的
>
> 本质是多根‘’电线‘’
>
> 特点：
>
> - 总线通信时“广播式”的
> - 任意时刻只允许一个设备向总线发送接受信息（总线的系统瓶颈）

> 按照==功能==能分为以下几类
>
> - ==数据总线== ： 负责部件和部件之间的数据传输，特点是双向传输
> - ==地址总线== ： 负责传递地址数据，特点是单向传输，只能由CPU传输地址总线的宽度（线数）与寻址空间有关，32bits寻址空间就有32根地址总线。由==设备地址==（表示要通讯的那个设备）==片内地址==（表示需要访问那个设备的哪个储存单元）
>
> - ==控制总线== ： 负责命令/状态的传输（片选信号、读信号、写信号）---tips：1读

##### 5.CPU的工作原理

> CPU = 算数逻辑单元 + 控制电路 + 寄存器
>
> - 算数逻辑单元 ： 专门执行算数和逻辑运算的数字电路，早期的算数逻辑单元只有加法器、
> - 控制电路  ： 是CPU的指挥中心，根据用户编写的程序，依次从存储器中提取指令
> - 寄存器 ： 是CPU内部用来存放数据的存储存储区域，用来暂存参与运算的数据和结果，是一种简单的时序逻辑电路，不过里面只有存储电路：锁存器/触发器

##### 6.指令流水线

> 三级流水线：取指、译码、执行

##### 7.一些基本的概念

- 机器字长 ： 指CPU一次能处理数据的位数，通常与CPU的寄存器的大小有关系
- 底层一般怎么描述地址？unsigned long *
- 芯片 ： 芯片 = CPU + 总线 + 外部控制器、CPU = 算数逻辑单元 + 控制器 + 寄存器
- 主流的CPU架构有 ： X86、ARM架构
- ARM系列产品 ： ARM7、8、9...11，12以后分为三个系列
  - ARM Cortex-A
    - Application性能级CPU
    - 对主频和性能要求较高
    - A7、A8（Gec-210）、A9...，A53（Gec-6818）
  - ARM Cortex-R
    - Realtime对实时性要求比较高，在军工和工业上使用较多
    - R4、R5、R7
  - ARM Cortex-M
    - MCU微控制器==>单片机系列
    - 常见的：M0、M1、M2、M3（STM32F103）、M4（STM32F407ZE）

 ```C
GEC-M4: 
		CPU型号(处理器内核): ARM Cortex-M4 ,32bits 
		芯片型号:  ST公司(STM32F407ZE)
		主频: 168M Hz 
GEC-6818: 
		CPU型号(处理器内核): ARM Cortex-A53 ,64bits  
		芯片型号:  三星 S5P6818
		主频: 1G Hz 
 ```



